---
title: "DATA 606 Data Project Proposal"
author: "Ramnivas Singh"
date: "04/11/2021"
output:
  pdf_document:
    toc: yes
    toc_depth: '5'
  html_document:
    theme: default
    highlight: espresso
    toc: yes
    toc_depth: 5
    toc_float:
      collapsed: yes
subtitle: Adult Census Income
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(eval = TRUE, results = TRUE, message = FALSE, warning = FALSE)
```

--------------------------------------------------------------------------------

\clearpage

## Data Preparation

```{r results='hide', warning=FALSE, message=FALSE}
library(ggplot2)
library(dplyr)
library(plotly)
library(tidyverse)
library (readr)
library(DT)
library(lares)
library(ggthemes)
library(data.table)
```

```{r}
adult.data <- read.csv("https://raw.githubusercontent.com/rnivas2028/MSDS/Data606/Final-Project/adult-all.csv",  
                       stringsAsFactors = FALSE, header = TRUE, strip.white = TRUE)
# strip.white = TRUE to keep out the latest rows (empty rows)
# header = TRUE to retain header information
```

--------------------------------------------------------------------------------

\clearpage

### Research question 

**You should phrase your research question in a way that matches up with the scope of inference your dataset allows for.**

The Adult dataset is from the Census Bureau is picked for this project. The task is to find whether a given adult makes more than $50,000 a year based on the attributes such as education, age, Occupation, hours of work per week

--------------------------------------------------------------------------------

\clearpage

### Cases 

**What are the cases, and how many are there?**

There are two class values ‘>50K‘ and ‘<=50K‘, meaning it is a binary classification task. The classes are imbalanced, with a skew toward the ‘<=50K‘ class label.

* ‘>50K’: majority class, approximately 25%.
* ‘<=50K’: minority class, approximately 75%.

There are total 48842 rows (cases) and 15 variables in this dataset

Data analysis will be performed for following categories:
* Income by Education
* Income by workclass & Occupation
* Income by Marital status and relationship
* Income by Age
* Income by Gender
* Income by Native country

### Data collection 

--------------------------------------------------------------------------------

\clearpage

**Describe the method of data collection.** 

The United States Census Bureau, officially the Bureau of the Census, is a principal agency of the U.S. Federal Statistical System, responsible for producing data about the American people and economy. Every year, the U.S. Census Bureau contacts households across the country to participate in the American Community Survey (ACS). 

This data was extracted from the 1994 [Census bureau database](http://www.census.gov/en.html) by Ronny Kohavi and Barry Becker (Data Mining and Visualization, Silicon Graphics). 

--------------------------------------------------------------------------------

\clearpage

### Type of study 

**What type of study is this (observational/experiment)?**

This study is observational

--------------------------------------------------------------------------------

\clearpage

### Data Source 

**If you collected the data, state self-collected. If not, provide a citation/link.**

* A data file for this project is downloaded from this link (https://archive.ics.uci.edu/ml/machine-learning-databases/adult/adult.data)
* A copy of this dataset and naming is retained at this link (https://raw.githubusercontent.com/rnivas2028/MSDS/Data606/Final-Project/adult-all.csv)

--------------------------------------------------------------------------------

\clearpage


### Response 

**What is the response variable, and what type is it (numerical/categorical)?**

Response variable is categorical (income <=50K or >50K)

--------------------------------------------------------------------------------

\clearpage


### Explanatory 

**What is the explanatory variable, and what type is it (numerical/categorical)?**

The explanatory variable is median income and is numerical.
Other variables such as marital status, relationship and education level are categorical.

--------------------------------------------------------------------------------

\clearpage

### Relevant summary statistics 

**Provide summary statistics relevant to your research question. For example, if you’re comparing means across groups provide means, SDs, sample sizes of each group. This step requires the use of R, hence a code chunk is provided below. Insert more code chunks as needed.**'

Add a new field `education.segment` to show income by education   
```{r results = TRUE}
adult.data$education.segment <- cut(adult.data$education.num, breaks = c(0,4,8,12,17), 
                              labels = c("0 to 4", "5 to 8", "9 to 12", ">= 13"))
```

Some of the variables are not self-explanatory. The variable education_num stands for the number of years of education in total, which is a continuous representation of the discrete variable education. The variable relationship represents the responding unit’s role in the family. For simplicity of this analysis, the weighting factor is discarded

```{r}
# Print header of this dataset
names(adult.data)

# Print first few rows
head(adult.data)
# Print columns in the dataset with ? (value not available)
colSums(adult.data=="?")
# Print summary of date set
summary(adult.data)
```

#### 1.0 Income by Education 
Lets print various education level for reference purposes
```{r}
ggplot(data = adult.data) +
  aes(y=education.num, fill=education) +
  geom_bar()
```


```{r}
ggplot(data = adult.data) +
  aes(x = education.num, fill = income) +
  geom_histogram(binwidth=5, position="fill") +
  labs(x="Education", y="Frequency")
```

Relationship between education and income
```{r echo=TRUE, message=FALSE, warning=FALSE}
ggplot(data = adult.data) +
  aes(x=education.segment ,fill=income) + 
  geom_bar()
```

--------------------------------------------------------------------------------

\clearpage

#### 2.0 Income workclass & Occupation:
```{r echo=TRUE, message=FALSE, warning=FALSE}
ggplot(data = adult.data) +
  aes(x=workclass,fill=income) + 
  geom_bar()+
  theme(axis.text.x = element_text(angle = 90))
```
Private sector workers are the most likely to have an income of over 50K.   

```{r echo=TRUE, message=FALSE, warning=FALSE}
ggplot(data = adult.data) +
  aes(x=occupation,fill=income) + 
  geom_bar()+ 
  theme(axis.text.x = element_text(angle = 90))
```


```{r}
ggplot(data = adult.data) +
  aes(x=occupation,fill=income) + 
  geom_bar(position="fill") + 
  ylab("Frequency") +
  theme(axis.text.x = element_text(angle = 90))
```

--------------------------------------------------------------------------------

\clearpage

#### 3.0 Income by Marital status and relationship
```{r echo=TRUE, message=FALSE, warning=FALSE}
ggplot(data = adult.data) +
  aes(x=marital.status,fill=income) + 
  geom_bar()+ 
  theme(axis.text.x = element_text(angle = 90))
```

```{r}
ggplot(data = adult.data) +
  aes(x=marital.status,fill=income) + 
  geom_bar(position="fill") + 
  ylab("Frequency") + 
  theme(axis.text.x = element_text(angle = 90))
```

Looks like higher percentage of people with incomes above 50K among married people

By relationship:  
```{r echo=TRUE, message=FALSE, warning=FALSE}
ggplot(data = adult.data) +
  aes(x=relationship,fill=income) + 
  geom_bar()+ 
  theme(axis.text.x = element_text(angle = 90))
```

--------------------------------------------------------------------------------

\clearpage

#### 4.0 Income by Age

```{r}
ggplot(data = adult.data) +
  aes(x = age, fill = income) +
  geom_histogram(binwidth=5, position="fill") +
  labs(x="Age", y="Frequency") 
```

--------------------------------------------------------------------------------

\clearpage

#### 5.0 Income by Gender
We see the distribution by gender.    
```{r echo=TRUE, message=FALSE, warning=FALSE}
ggplot(data = adult.data) +
  aes(x=sex,fill=income) + 
  geom_bar()
```

At first glance, it can be seen that the proportion of women with income above 50K is lower than the proportion of men with income above 50K. Still, we show the frequency distribution.  
```{r}
ggplot(data = adult.data) +
  aes(x=sex,fill=income) + 
  geom_bar(position="fill") + 
  ylab("Frequency") 
```

--------------------------------------------------------------------------------

\clearpage

#### 6.0 Income by Native country
We show income by country of origin. 

```{r}
ggplot(data = adult.data) +
  aes(x=native.country,fill=income) + 
  geom_bar(position="fill") + 
  ylab("Frequency") + 
  theme(axis.text.x = element_text(angle = 90))
```  
There are important differences in income depending on the country of origin.  

--------------------------------------------------------------------------------

\clearpage


### Conclusion

* Based on this analysis on Census bureau database - its clear that no many individuals and families income is more than 50K \
* Professional specialty and managerial occupations clearly earn more than 50K
* Around 75% people earn less than 50K where as around 25% earn more than 50K
* People with native from Taiwan, India, France reported 50K or more income


### References

[Census bureau database](http://www.census.gov/en.html) by Ronny Kohavi and Barry Becker (Data Mining and Visualization, Silicon Graphics)\
Imbalanced Classification with the Adult Income Dataset by Jason Brownlee on March 6, 2020 in [Imbalanced Classification](https://machinelearningmastery.com/imbalanced-classification-with-the-adult-income-dataset/)\
Lichman, M. (2013). UCI Machine Learning Repository [http://archive.ics.uci.edu/ml]. Irvine, CA: University of California, School of Information and Computer Science.


